# -*- coding: utf-8 -*-
"""
Created on Wed Apr 15 18:01:53 2020

"""
import numpy
import numpy as np # linear algebra
import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)
import scipy as sp
import collections
from mpl_toolkits.axes_grid1 import host_subplot
import mpl_toolkits.axisartist as AA
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn import preprocessing
from cycler import cycler
from itertools import cycle


df=pd.read_csv('nusrat_all_dataset.csv')



#feature_to_plot='Empty'
#feature_to_plot='ldrgetprocedureaddress'
#feature_to_plot='ntclose'
#feature_to_plot='ntallocatevirtualmemory'
feature_to_plot='ldrloaddll'
X=df[feature_to_plot].values
Y=(df['Class'])
le = preprocessing.LabelEncoder()
y=le.fit_transform(Y)

#sns.axes_style('whitegrid', {'grid.linestyle':'--'})

#groups=np.unique(y)

kwargs = dict(alpha=0.5, bins=50)
class_names=list(np.unique(Y))

#colors = cycler(['aqua', 'darkorange', 'cornflowerblue','r','g','y','m','b'])
#fig = plt.figure()
ax = plt.subplot(111)
#plt.rc('axes', prop_cycle=(cycler('color', ['r', 'g', 'b', 'y']) ))
ax.set_prop_cycle('color',['crimson','aqua', 'darkorange', 'brown','gray','purple','lawngreen','gold'])
ax.set_facecolor('White')
for groups in np.unique(y):
    x=X[y==groups]
#    plt.hist(x, **kwargs, color=colors[groups], label=class_names[groups])
#    ax=plt.hist(x, bins=50, label=class_names[groups])
    
    ax=sns.distplot(x, bins=50, kde=False,label=class_names[groups])
    sns.set_style('darkgrid',{'grid.linestyle':'--'})

    
plt.gca().set(title='Frequency Histogram of Top Feature 4', ylabel='Frequency')
ax.spines['left'].set_color('black')
ax.spines['right'].set_color('black')
ax.spines['top'].set_color('black')
ax.spines['bottom'].set_color('black')
ax.spines['left'].set_linewidth(1)
ax.spines['right'].set_linewidth(1)
ax.spines['top'].set_linewidth(1)
ax.spines['bottom'].set_linewidth(1)
#sns.set(font_scale=1.0)
plt.tight_layout()
#plt.xlim(50,75)
plt.legend();
plt.savefig('D:\Onedrive Gatech\OneDrive - Georgia Institute of Technology\Documents\Mousumi\Figures\Feature_4_Distibution_Same_Plot.jpg', format = 'jpg' , dpi=1000)
plt.show()


##################plot in subplots
#fig = plt.figure()
#ax = fig.add_subplot(111)
#plt.rc('axes', prop_cycle=(cycler('color', ['r', 'g', 'b', 'y']) ))
#ax.set_prop_cycle('color',['crimson','aqua', 'darkorange', 'brown','gray','purple','lawngreen','gold'])
#ax.set_facecolor('White')
colors=['crimson','aqua', 'darkorange', 'brown','gray','purple','lawngreen','gold']

plt.figure()
fig, axes = plt.subplots(2, 4, figsize=(10, 5),tight_layout=True, sharey=True)

for i, ax in enumerate(axes.flatten()):
    ax.hist(X[y==i], bins=50,color=colors[i])
    ax.spines['left'].set_color('black')
    ax.spines['right'].set_color('black')
    ax.spines['top'].set_color('black')
    ax.spines['bottom'].set_color('black')
    ax.spines['left'].set_linewidth(1)
    ax.spines['right'].set_linewidth(1)
    ax.spines['top'].set_linewidth(1)
    ax.spines['bottom'].set_linewidth(1)
#    subtitle=class_names[i]
    ax.title.set_text(class_names[i])
    
    


#sns.set(font_scale=1.0)
#plt.suptitle('Frequency Distribution for Important Feature 1',y=1)    
plt.tight_layout()
#plt.xlim(50,75)
#plt.legend();
plt.savefig('D:\Onedrive Gatech\OneDrive - Georgia Institute of Technology\Documents\Mousumi\Figures\Feature_4_Distibution_Sub_Plots.jpg', format = 'jpg' , dpi=1000)
plt.show()
